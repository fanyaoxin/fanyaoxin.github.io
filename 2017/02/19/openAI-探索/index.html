<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>openAI 探索 | Fan Yaoxin</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">openAI 探索</h1><a id="logo" href="/.">Fan Yaoxin</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">openAI 探索</h1><div class="post-meta">Feb 19, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h1 id="OPENAI-Gym"><a href="#OPENAI-Gym" class="headerlink" title="OPENAI Gym"></a>OPENAI Gym</h1><p>OpenAI Gym 是马斯克创立的OpenAI发布的一款产品，是一款用于研发和比较强化学习算法的工具包。它能训练智能体(agent)做任何事—— 从行走到围棋之类的游戏。</p>
<p>在这一平台上，开发者可以把自己开发的AI算法拿出来展示，在OpenAI Gym里，可以看到AI开放化的速度正在加快。</p>
<p>OPENAI Gym 包括两方面：</p>
<ul>
<li>gym open-source library：<ul>
<li>一系列的问题（环境）用来测试你算法</li>
</ul>
</li>
<li>OPENAI gym service<ul>
<li>允许去比较不同agent的表现</li>
</ul>
</li>
</ul>
<h2 id="get-started"><a href="#get-started" class="headerlink" title="get started"></a>get started</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/openai/gym</div><div class="line">cd gym</div><div class="line">pip install -e . <span class="comment">#minimal install</span></div><div class="line"><span class="comment">#(pip install -e .[all] to do a full install)</span></div><div class="line"><span class="comment">#https://github.com/openai/gym#installing-everything</span></div></pre></td></tr></table></figure>
<h2 id="running-an-environment"><a href="#running-an-environment" class="headerlink" title="running an environment"></a>running an environment</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> gym</div><div class="line">env = gym.make(<span class="string">'CartPole-v0'</span>)</div><div class="line">env.reset()</div><div class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">1000</span>):</div><div class="line">    env.render()</div><div class="line">    env.step(env.action_space.sample()) <span class="comment"># take a random action</span></div></pre></td></tr></table></figure>
<p>有很多种例子，可以替换 CartPole-v0 ：</p>
<p>MountainCar-vo,MsPacman-vo…….</p>
<h2 id="observations"><a href="#observations" class="headerlink" title="observations"></a>observations</h2><h4 id="step-function"><a href="#step-function" class="headerlink" title="step() function"></a>step() function</h4><p>return four values:</p>
<ul>
<li><p>observation(object):</p>
<p>an environment-specific object representing your observation of the environment. For example, pixel data from a camera, joint angles and joint velocities of a robot, or the board state in a board game.</p>
<p>环境观察值—— 环境变量—— obseravation</p>
</li>
<li><p>reward(float):</p>
<p>amount of reward achieved by the previous action. The scale varies between environments, but the goal is always to increase your total reward.</p>
<p>上一次行到的得分—— 全局变量——— 为了优化总得分</p>
</li>
<li><p>done(boolean):</p>
<p>whether it’s time to reset the environment again. Most (but not all) tasks are divided up into well-defined episodes, and done being True indicates the episode has terminated. (For example, perhaps the pole tipped too far, or you lost your last life.)</p>
<p>表示是否结束这次train，，或者就是reset the environment again </p>
<p>比如，因为游戏人物死了啊，或者跑出一个区域啦，就重置，done就being true</p>
</li>
<li><p>info(dict):</p>
<p>diagnostic information useful for debugging. It can sometimes be useful for learning (for example, it might contain the raw probabilities behind the environment’s last state change). However, official evaluations of your agent are not allowed to use this for learning.</p>
<p>degugging用的诊断信息, 但是 official evaluations of your agent are not allowed to use this for learning.</p>
</li>
</ul>
<p>这只是一次‘ agent-environment loop’ 中的一次</p>
<p>每次循环（进程）, agent 选择一个action, 然后environment 返回一个observation and a reward.</p>
<p><img src="/Users/FanYxxx/Documents/截图/WX20170219-172905@2x.png" alt="WX20170219-172905@2x"></p>
<p>每次进程，从reset开始，并返回一个初始的observation</p>
<p>所以一个好的code，最好能有done这个flag</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> gym</div><div class="line">env = gym.make(<span class="string">'CartPole-v0'</span>)</div><div class="line"><span class="keyword">for</span> i_episode <span class="keyword">in</span> range(<span class="number">20</span>):</div><div class="line">    observation = env.reset()</div><div class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> range(<span class="number">100</span>):</div><div class="line">        env.render()</div><div class="line">        print(observation)</div><div class="line">        action = env.action_space.sample()</div><div class="line">        observation, reward, done, info = env.step(action)</div><div class="line">        <span class="keyword">if</span> done:</div><div class="line">            print(<span class="string">"Episode finished after &#123;&#125; timesteps"</span>.format(t+<span class="number">1</span>))</div><div class="line">            <span class="keyword">break</span></div></pre></td></tr></table></figure>
<h4 id="spaces"><a href="#spaces" class="headerlink" title="spaces"></a>spaces</h4><p>上面这个例子，我们进行了随机抽样行动，但我们不知道这些action的意义是什么。</p>
<p>每一个envrionment使用Space 来describe 有效的actions 和observations</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> gym</div><div class="line">env = gym.make(<span class="string">'CartPole-v0'</span>)</div><div class="line">print(env.action_space)</div><div class="line"><span class="comment">#&gt; Discrete(2)</span></div><div class="line">print(env.observation_space)</div><div class="line"><span class="comment">#&gt; Box(4,)</span></div></pre></td></tr></table></figure>
<p>Discrete 空间允许一个区间内的非负数, 所以 这里，有效的action为0或者1</p>
<p>Box空间展现的是一个n维的box,所以有效的observation 应该是包含四个数字的array, 并且我们能check box的边界：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">print(env.observation_space.high)</div><div class="line"><span class="comment">#&gt; array([ 2.4       ,         inf,  0.20943951,         inf])</span></div><div class="line">print(env.observation_space.low)</div><div class="line"><span class="comment">#&gt; array([-2.4       ,        -inf, -0.20943951,        -inf])</span></div></pre></td></tr></table></figure>
<p>这两个只是基本的，最常见的space，你可以从space中sample，看一看还有什么样的。。。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> gym <span class="keyword">import</span> spaces</div><div class="line">space = spaces.Discrete(<span class="number">8</span>) <span class="comment"># Set with 8 elements &#123;0, 1, 2, ..., 7&#125;</span></div><div class="line">x = space.sample()</div><div class="line"><span class="keyword">assert</span> space.contains(x)</div><div class="line"><span class="keyword">assert</span> space.n == <span class="number">8</span></div></pre></td></tr></table></figure>
<h4 id="environments"><a href="#environments" class="headerlink" title="environments"></a>environments</h4><p>gym的主要目的是为了提供a large collection of environments that expose a common interface and are versioned to allowe for comparisons.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> gym <span class="keyword">import</span> envs</div><div class="line">print(envs.registry.all())</div><div class="line"><span class="comment">#&gt; [EnvSpec(DoubleDunk-v0), EnvSpec(InvertedDoublePendulum-v0), EnvSpec(BeamRider-v0), EnvSpec(Phoenix-ram-v0), EnvSpec(Asterix-v0), EnvSpec(TimePilot-v0), EnvSpec(Alien-v0), EnvSpec(Robotank-ram-v0), EnvSpec(CartPole-v0), EnvSpec(Berzerk-v0), EnvSpec(Berzerk-ram-v0), EnvSpec(Gopher-ram-v0), ...</span></div></pre></td></tr></table></figure>
<p>这会给一个EnvSpec的list，这些都为特定的人物定义了变量.</p>
<p>比如说 </p>
<ul>
<li>EnvSpec（Hopper-v1）定义了一个环境：一个单足跳的二维机器人</li>
<li>EnvSpec（Go9x9-v0）定义了一个 9X9的Go game</li>
</ul>
<p>这些env的ID都很晦涩，是为了以后更好的比较并更新新版本。</p>
<p>make操作，可以添加自己的env, 但是要register them 并且let them know.</p>
<h4 id="recording-and-uploading-results"><a href="#recording-and-uploading-results" class="headerlink" title="recording and uploading results"></a>recording and uploading results</h4><p>gym可以很方便的记录你算法在一个环境内的表现，并且take videos of learning.</p>
<p>只要wrap your env with a <em><u>Monitor</u></em> Wrapper as follows</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> gym</div><div class="line"><span class="keyword">from</span> gym <span class="keyword">import</span> wrappers</div><div class="line">env = gym.make(<span class="string">'CartPole-v0'</span>)</div><div class="line">env = wrappers.Monitor(env, <span class="string">'/tmp/cartpole-experiment-1'</span>)</div><div class="line"><span class="keyword">for</span> i_episode <span class="keyword">in</span> range(<span class="number">20</span>):</div><div class="line">    observation = env.reset()</div><div class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> range(<span class="number">100</span>):</div><div class="line">        env.render()</div><div class="line">        print(observation)</div><div class="line">        action = env.action_space.sample()</div><div class="line">        observation, reward, done, info = env.step(action)</div><div class="line">        <span class="keyword">if</span> done:</div><div class="line">            print(<span class="string">"Episode finished after &#123;&#125; timesteps"</span>.format(t+<span class="number">1</span>))</div><div class="line">            <span class="keyword">break</span></div></pre></td></tr></table></figure>
<p>然后能把结果上传到OpenAI Gym：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> gym</div><div class="line">gym.upload(<span class="string">'/tmp/cartpole-experiment-1'</span>, api_key=<span class="string">'YOUR_API_KEY'</span>)</div></pre></td></tr></table></figure>
<h4 id="evaluations"><a href="#evaluations" class="headerlink" title="evaluations"></a>evaluations</h4><p>每个upload的都会生成一个 evaluation的object 在服务器上。</p>
<p>然后需要构建一个gist，展现如何得到，产生你的结果。</p>
<p>或者，你可以提供你的gist在upload的时候，通过一个writeup的变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> gym</div><div class="line">gym.upload(<span class="string">'/tmp/cartpole-experiment-1'</span>, writeup=<span class="string">'https://gist.github.com/gdb/b6365e79be6052e7531e7ba6ea8caf23'</span>, api_key=<span class="string">'YOUR_API_KEY'</span>)</div></pre></td></tr></table></figure>
<p>在多数的环境下，你的目标是  减少步数并达到一个performance的下限。</p>
<p>一些很难很复杂的环境，下限还不clear，那么，你的目标是最大化最终performance</p>
<h4 id="reviewed-evaluations"><a href="#reviewed-evaluations" class="headerlink" title="reviewed evaluations"></a>reviewed evaluations</h4><p>每个env，都有一个reviewd evaluations的列表</p>
<p><a href="https://gym.openai.com/envs/Walker2d-v1" target="_blank" rel="external">https://gym.openai.com/envs/Walker2d-v1</a></p>
<h4 id="how-to-help"><a href="#how-to-help" class="headerlink" title="how to help"></a>how to help</h4><p>There’s a lot you can do to help!</p>
<ul>
<li>Solve environments and submit your evaluations!</li>
<li>Reproduce others’ solutions, and let the solution author (<a href="https://github.com/openai/gym/blob/master/CODE_OF_CONDUCT.rst" target="_blank" rel="external">constructively</a>) know how it goes by commenting on their Gist. Depending on demand, we’ll release tools to help you find solutions to reproduce. Until then you can hang around in <a href="https://gym.openai.com/chat" target="_blank" rel="external">chat</a>.</li>
<li>Integrate new environments into <a href="https://github.com/openai/gym" target="_blank" rel="external">gym</a>. Please show that you have run several well-implemented RL algorithms on it, and you have good reason to believe that it is tractable but not too easy. (If there’s demand, we may introduce a registry for sharing environment collections without pulling them into the main repository.)</li>
</ul>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://fanyaoxin.com/2017/02/19/openAI-探索/" data-id="cizdwvupe00019ikgsz2vh11u" class="article-share-link">Aktie</a><div class="tags"><a href="/tags/强化学习/">强化学习</a></div><div class="post-nav"><a href="/2017/02/19/向量机/" class="pre">向量机</a><a href="/2017/02/10/神经网络/" class="next">神经网络</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://fanyaoxin.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/pattern-recognition/" style="font-size: 15px;">pattern recognition</a> <a href="/tags/database/" style="font-size: 15px;">database</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/数据分析/" style="font-size: 15px;">数据分析</a> <a href="/tags/可视化/" style="font-size: 15px;">可视化</a> <a href="/tags/强化学习/" style="font-size: 15px;">强化学习</a> <a href="/tags/生活/" style="font-size: 15px;">生活</a> <a href="/tags/AI/" style="font-size: 15px;">AI</a> <a href="/tags/机器学习/" style="font-size: 15px;">机器学习</a> <a href="/tags/文本处理/" style="font-size: 15px;">文本处理</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/19/向量机/">向量机</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/19/openAI-探索/">openAI 探索</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/10/神经网络/">神经网络</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/09/机器学习课程大纲/">机器学习课程大纲</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/25/机器学习笔记（一）/">机器学习笔记（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/05/noSQL/">noSQL</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/04/pandas/">pandas</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/22/python基础-pandas/">python基础-pandas</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/10/python基础-numpy/">python基础-numpy</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/09/python基础-3/">python基础(3)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Fan Yaoxin.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>