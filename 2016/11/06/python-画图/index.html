<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>python 画图 | Fan Yaoxin</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">python 画图</h1><a id="logo" href="/.">Fan Yaoxin</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">python 画图</h1><div class="post-meta">Nov 6, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>#Matplotlib</p>
<p>##1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">%matplotlib inline</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div></pre></td></tr></table></figure>
<p>3 types of main plots:</p>
<ul>
<li>plt.plot</li>
<li>plt.scatter</li>
<li>plt.bar</li>
</ul>
<h2 id="2-line-plot"><a href="#2-line-plot" class="headerlink" title="2 line plot"></a>2 line plot</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#simple line plot</span></div><div class="line">plt.plot([<span class="number">30</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">40</span>])</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="3-scatter-plot"><a href="#3-scatter-plot" class="headerlink" title="3  scatter plot"></a>3  scatter plot</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#scatter plot</span></div><div class="line">r1=np.random.randn(<span class="number">10</span>) <span class="comment">#10</span></div><div class="line">r2=np.random.randn(<span class="number">10</span>) <span class="comment">#10</span></div><div class="line">plt.scatter(r1,r2) <span class="comment">#in this case we have x and y</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="4-bar-chart"><a href="#4-bar-chart" class="headerlink" title="4  bar chart"></a>4  bar chart</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#bar chart </span></div><div class="line">plt.bar(range(<span class="number">4</span>),[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>])</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="5-multiple-plots-on-the-same-figure"><a href="#5-multiple-plots-on-the-same-figure" class="headerlink" title="5 multiple plots on the same figure"></a>5 multiple plots on the same figure</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#mulitiple plots on the same figure</span></div><div class="line">plt.plot([<span class="number">30</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">40</span>])</div><div class="line">plt.plot([<span class="number">10</span>,<span class="number">20</span>,<span class="number">20</span>,<span class="number">45</span>])</div><div class="line">plt.plot([<span class="number">1</span>,<span class="number">1.5</span>,<span class="number">3</span>],[<span class="number">60</span>,<span class="number">50</span>,<span class="number">45</span>]) <span class="comment">#in this case we have x and y</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h3 id="5-1-titles-and-axis-labels"><a href="#5-1-titles-and-axis-labels" class="headerlink" title="5.1 titles and axis labels"></a>5.1 titles and axis labels</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#adding titles and labels</span></div><div class="line">plt.ylabel(<span class="string">"Random Value"</span>)</div><div class="line">plt.title(<span class="string">"10 random numbers in a bar chart"</span>)</div><div class="line">plt.bar(range(<span class="number">10</span>),r1)</div><div class="line">plt.xlabel(<span class="string">"order"</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="6-adding-a-legend"><a href="#6-adding-a-legend" class="headerlink" title="6 adding a legend"></a>6 adding a legend</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#adding labels and a legend</span></div><div class="line">plt.plot([<span class="number">30</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">40</span>],label=<span class="string">"A"</span>)</div><div class="line">plt.plot([<span class="number">10</span>,<span class="number">20</span>,<span class="number">20</span>,<span class="number">45</span>],label=<span class="string">"B"</span>)</div><div class="line">plt.plot([<span class="number">1</span>,<span class="number">1.5</span>,<span class="number">3</span>],[<span class="number">60</span>,<span class="number">50</span>,<span class="number">45</span>],label=<span class="string">"c"</span>)</div><div class="line">plt.legend()</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="7-setting-the-ticks-and-limiting-the-axis-ranges"><a href="#7-setting-the-ticks-and-limiting-the-axis-ranges" class="headerlink" title="7 setting the ticks and limiting the axis ranges"></a>7 setting the ticks and limiting the axis ranges</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#setting the ticks, grid and limiting the range</span></div><div class="line">plt.scatter(r1,r2)</div><div class="line">plt.title(<span class="string">"a random scatter plot"</span>)</div><div class="line">plt.xlabel(<span class="string">"a random value"</span>)</div><div class="line">plt.ylabel(<span class="string">'another random value'</span>)</div><div class="line">plt.grid()</div><div class="line">plt.xlim(<span class="number">-0.5</span>,<span class="number">0.5</span>)</div><div class="line">plt.ylim(<span class="number">-1.0</span>,<span class="number">1.0</span>)</div><div class="line">plt.xticks([<span class="number">-0.5</span>,<span class="number">0.5</span>])</div><div class="line">plt.yticks(np.arange(<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0.2</span>))</div><div class="line">plt.show()</div><div class="line"></div><div class="line"><span class="comment">#np.arange reminder of syntax: evenly sampled</span></div><div class="line"><span class="comment">#from -1 to 1 at 0.2 intervals</span></div></pre></td></tr></table></figure>
<h2 id="8-customising-the-plot"><a href="#8-customising-the-plot" class="headerlink" title="8 customising the plot"></a>8 customising the plot</h2><p>for a map of colors: <mapplotlib.org examples="" color="" named_colors.html=""></mapplotlib.org></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#customising the plot</span></div><div class="line">plt.plot([<span class="number">30</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">40</span>],linestyle=<span class="string">':'</span>,</div><div class="line">		color=<span class="string">'black'</span>,linewidth=<span class="number">3</span>,markersize=<span class="number">5</span>,marker=<span class="string">"o"</span>)</div><div class="line">plt.plot([<span class="number">10</span>,<span class="number">20</span>,<span class="number">20</span>,<span class="number">45</span>],<span class="string">'rx--'</span>)</div><div class="line">plt.plot([<span class="number">1</span>,<span class="number">1.5</span>,<span class="number">3</span>],[<span class="number">60</span>,<span class="number">50</span>,<span class="number">45</span>],<span class="string">'g--'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="9-passing-objects-to-the-legend"><a href="#9-passing-objects-to-the-legend" class="headerlink" title="9 passing objects to the legend"></a>9 passing objects to the legend</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#passing objects to the legend using objects</span></div><div class="line">a=plt.plot([<span class="number">30</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">40</span>])</div><div class="line">a[<span class="number">0</span>].set_color(<span class="string">"red"</span>)</div><div class="line">a[<span class="number">0</span>].set_linewidth(<span class="number">10</span>)</div><div class="line">a[<span class="number">0</span>].set_alpha(<span class="number">0.4</span>)  <span class="comment">#the degree of the color shades</span></div><div class="line"></div><div class="line">b=plt.plot([<span class="number">20</span>,<span class="number">40</span>,<span class="number">30</span>,<span class="number">10</span>])</div><div class="line">b[<span class="number">0</span>].set_color(<span class="string">"blue"</span>)</div><div class="line">b[<span class="number">0</span>].set_linewidth(<span class="number">10</span>)</div><div class="line">b[<span class="number">0</span>].set_alpha(<span class="number">0.4</span>)</div><div class="line"></div><div class="line">plt.legend([a[<span class="number">0</span>],b[<span class="number">0</span>]],[<span class="string">"A"</span>,<span class="string">"B"</span>])</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="10-stacked-bar-chart"><a href="#10-stacked-bar-chart" class="headerlink" title="10 stacked bar chart"></a>10 stacked bar chart</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#stacked bar chart example- with added error bars</span></div><div class="line">N=<span class="number">5</span></div><div class="line">menMeans=(<span class="number">20</span>,<span class="number">35</span>,<span class="number">30</span>,<span class="number">35</span>,<span class="number">27</span>)</div><div class="line">womenMeans=(<span class="number">25</span>,<span class="number">32</span>,<span class="number">34</span>,<span class="number">20</span>,<span class="number">25</span>)</div><div class="line">menstd=(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>)</div><div class="line">womenstd=(<span class="number">3</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>)</div><div class="line">ind=np.arange(N) <span class="comment"># the x locations for the group</span></div><div class="line">width=<span class="number">0.35</span> <span class="comment">#the width of the bars: can also be len(x) sequence</span></div><div class="line"></div><div class="line">p1=plt.bar(ind,menMeans,width,color=<span class="string">'r'</span>,yerr=menstd)</div><div class="line">p2=plt.bar(ind,womenMeans,width,color=<span class="string">'y'</span>,</div><div class="line">							bottom=menMeans,yerr=womenstd)</div><div class="line">plt.ylabel(<span class="string">'scores'</span>)</div><div class="line">plt.title(<span class="string">'scores by group and gender'</span>)</div><div class="line">plt.xticks(ind+width/<span class="number">2.</span>,(<span class="string">'G1'</span>,<span class="string">'G2'</span>,<span class="string">'G3'</span>,<span class="string">'G4'</span>,<span class="string">'G5'</span>))</div><div class="line">plt.yticks(np.arrange(<span class="number">0</span>,<span class="number">81</span>,<span class="number">10</span>))</div><div class="line">plt.legend((p1[<span class="number">0</span>],p2[<span class="number">0</span>]),(<span class="string">'men'</span>,<span class="string">'women'</span>))</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="11-color-maps"><a href="#11-color-maps" class="headerlink" title="11 color maps"></a>11 color maps</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># in cases where we want to use the colour to display</span></div><div class="line"><span class="comment"># an additional dimension</span></div><div class="line">x=np.arange(<span class="number">100</span>)</div><div class="line">y=x</div><div class="line">t=x</div><div class="line">plt.scatter(x,y,c=t)  <span class="comment">##c---color</span></div><div class="line">plt.colorbar()</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>​    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#a more complex example </span></div><div class="line">print(np.linspace(<span class="number">0</span>,<span class="number">1</span>,<span class="number">10</span>))</div><div class="line">ten_colors=plt.cm.Set1(np.linspace(<span class="number">0</span>,<span class="number">1</span>,<span class="number">10</span>))</div><div class="line">plt.scatter(r1,r2,c=ten_colors,s=<span class="number">100</span>)</div><div class="line">plt.title(<span class="string">'a random scatter plot'</span>)</div><div class="line">plt.xlabel(<span class="string">'a random value'</span>)</div><div class="line">plt.ylable(<span class="string">'another random value'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="12-plotting-more-than-one-plot"><a href="#12-plotting-more-than-one-plot" class="headerlink" title="12 plotting more than one plot"></a>12 plotting more than one plot</h2><p>​    <em>subplot(nrows,ncols,plot_number)</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#subplot</span></div><div class="line">plt.figure(<span class="number">1</span>,figsize=(<span class="number">10</span>,<span class="number">8</span>))</div><div class="line"><span class="comment">#in "inches", can change DPI "dots per inch"</span></div><div class="line"></div><div class="line">x1= np.linspace(<span class="number">0.0</span>,<span class="number">5.0</span>)</div><div class="line">x2= np.linspace(<span class="number">0.0</span>,<span class="number">2.0</span>)</div><div class="line"></div><div class="line">y1=np.cos(<span class="number">2</span>*np.pi*x1)*np.exp(-x1)</div><div class="line">y2=np.cos(<span class="number">2</span>*np.pi*x2)</div><div class="line"></div><div class="line">plt.subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>)</div><div class="line">plt.plot(x1,y1,<span class="string">'yo-'</span>)</div><div class="line">plt.title(<span class="string">'a tale of 2 subplots'</span>)</div><div class="line">plt.ylabel(<span class="string">'damped oscillation'</span>)</div><div class="line"></div><div class="line">plt.subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>)</div><div class="line">plt.plot(x2,y2,<span class="string">'r.-'</span>)</div><div class="line">plt.xlabel(<span class="string">'time (s)'</span>)</div><div class="line">plt.ylabel(<span class="string">'Undamped'</span>)</div><div class="line"></div><div class="line">plt.subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">3</span>)</div><div class="line"></div><div class="line">plt.show</div><div class="line"></div><div class="line"><span class="comment">#np.linspace(start,stop,num=) returns evenly spaced</span></div><div class="line"><span class="comment">#numbers over a specified interval</span></div></pre></td></tr></table></figure>
<h2 id="13-non-linear-axis-scales"><a href="#13-non-linear-axis-scales" class="headerlink" title="13 non linear axis scales"></a>13 non linear axis scales</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#make up some data in the interval [0,1]</span></div><div class="line">y=np.random.normal(loc=<span class="number">0.5</span>,scale=<span class="number">0.4</span>,size=<span class="number">100</span>)</div><div class="line">y=y[(y&gt;<span class="number">0</span>)&amp;(y&lt;<span class="number">1</span>)]</div><div class="line">y.sort()</div><div class="line">x=np.arange(len(y))  <span class="comment">#create the x axies for y group</span></div><div class="line"></div><div class="line"><span class="comment">#plot with various axes scales</span></div><div class="line">plt.figure(<span class="number">1</span>,figsize=(<span class="number">12</span>,<span class="number">6</span>))</div><div class="line"></div><div class="line"><span class="comment">#linear</span></div><div class="line">plt.subplot(<span class="number">131</span>)</div><div class="line">plt.plot(x,y)</div><div class="line">plt.yscale(<span class="string">'linear'</span>)</div><div class="line">plt.title(<span class="string">'linear'</span>)</div><div class="line">plt.grid(<span class="keyword">True</span>)</div><div class="line"></div><div class="line"><span class="comment">#log</span></div><div class="line">plt.subplot(<span class="number">132</span>)</div><div class="line">plt.plot(x,y)</div><div class="line">plt.yscale(<span class="string">'log'</span>)</div><div class="line">plt.title(<span class="string">'log'</span>)</div><div class="line">plt.grid(<span class="keyword">True</span>)</div><div class="line"></div><div class="line"><span class="comment">#logit</span></div><div class="line">plt.subplot(<span class="number">133</span>)</div><div class="line">plt.plot(x,y)</div><div class="line">plt.yscale(<span class="string">'logit'</span>)</div><div class="line">plt.title(<span class="string">'logit'</span>)</div><div class="line">plt.grid(<span class="keyword">True</span>)  <span class="comment">##set the gridlines</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="14-annotating"><a href="#14-annotating" class="headerlink" title="14 annotating"></a>14 annotating</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#annotating graphs</span></div><div class="line">t=np.arange(<span class="number">0.0</span>,<span class="number">5.0</span>,<span class="number">0.01</span>)</div><div class="line">s=np.cos(<span class="number">2</span>*np.pi*t)</div><div class="line">line,=plt.plot(t,s,lw=<span class="number">2</span>) <span class="comment">##,?</span></div><div class="line">plt.annotate(<span class="string">'local max'</span>,xy=(<span class="number">2</span>,<span class="number">1</span>),xytext=(<span class="number">3</span>,<span class="number">1.5</span>),						arrowprops=dict(facecolor=<span class="string">'black'</span>,                                                                                   				shrink=<span class="number">0.05</span>),)</div><div class="line">plt.ylim(<span class="number">-2</span>,<span class="number">2</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="15-reference-lines-and-span"><a href="#15-reference-lines-and-span" class="headerlink" title="15  reference lines and span"></a>15  reference lines and span</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#Horizontal and vertical lines, and span</span></div><div class="line">t= np.arange(<span class="number">-1</span>,<span class="number">2</span>,<span class="number">.01</span>)</div><div class="line">s= np.sin(<span class="number">2</span>*np.pi*t)</div><div class="line"></div><div class="line">plt.plot(t,s)</div><div class="line"><span class="comment">#draw a thick read hline at y=0 that spans the xrange</span></div><div class="line">l= plt.axhline(linewidth=<span class="number">4</span>,color=<span class="string">'r'</span>)</div><div class="line"></div><div class="line"><span class="comment">#draw a default hline at y=1 that spans the xrange</span></div><div class="line">l= plt.axhline(y=<span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment">#draw a default vline at x=1 that spans yrange</span></div><div class="line">l=plt.axvline(x=<span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment">#draw a thick blue vline at x=0 that spans the upper quadrant of the yrange</span></div><div class="line">l= plt.axvline(x=<span class="number">0</span>,ymin=<span class="number">0.75</span>,linewidth=<span class="number">4</span>,color=<span class="string">'b'</span>)</div><div class="line"></div><div class="line"><span class="comment">#draw a default hline at y=.5 that spans the middle half of the axes</span></div><div class="line">l= plt.axhline(y=<span class="number">.5</span>,xmin=<span class="number">0.25</span>,xmax=<span class="number">0.75</span>)</div><div class="line"></div><div class="line">p=plt.axhspan(<span class="number">0.25</span>,<span class="number">0.75</span>,facecolor=<span class="string">'0.5'</span>,alpha=<span class="number">0.5</span>)</div><div class="line">p=plt.axvspan(<span class="number">1.25</span>,<span class="number">1.55</span>,facecolor=<span class="string">'g'</span>,alpha=<span class="number">0.5</span>)</div><div class="line"></div><div class="line">plt.axis([<span class="number">-1</span>,<span class="number">2</span>,<span class="number">-1</span>,<span class="number">2</span>])  <span class="comment">#([xmin,xman,ymin,ymax])</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="16-adding-text-to-a-graph"><a href="#16-adding-text-to-a-graph" class="headerlink" title="16 adding text to a graph"></a>16 adding text to a graph</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#adding text to the graph</span></div><div class="line">font=&#123;<span class="string">'family'</span>:<span class="string">'serif'</span>,</div><div class="line">	  <span class="string">'color'</span>: <span class="string">'darkred'</span>,</div><div class="line">	  <span class="string">'weight'</span>:<span class="string">'normal'</span>,</div><div class="line">	  <span class="string">'size'</span>:<span class="number">16</span>,</div><div class="line">	  &#125;</div><div class="line">x=np.linspace(<span class="number">0.0</span>,<span class="number">5.0</span>,<span class="number">100</span>)</div><div class="line">y=np.cos(x*np.pi*x)*np.exp(-x)</div><div class="line"></div><div class="line">plt.plot(x,y,<span class="string">'k'</span>)</div><div class="line">plt.title(<span class="string">'damped exponential decay'</span>,fontdict=font)</div><div class="line">plt.text(<span class="number">2</span>,<span class="number">0.65</span>,<span class="string">r'$\cos(2\pi t) \exp(-t)$'</span>,fontdict=font)</div><div class="line">plt.xlabel(<span class="string">'time (s)'</span>,fontdict=font)</div><div class="line">plt.ylabel(<span class="string">'voltage (mV)'</span>,fontdict=font)</div><div class="line"></div><div class="line"><span class="comment">#tweak spacing to prevent.clipping of ylabel</span></div><div class="line">plt.subplots_adjust(left=<span class="number">0.15</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="17-exporting-plots-in-various-formats"><a href="#17-exporting-plots-in-various-formats" class="headerlink" title="17 exporting plots in various formats"></a>17 exporting plots in various formats</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#exporting plots</span></div><div class="line">f = plt.figure(<span class="number">1</span>, figsize=(<span class="number">10</span>,<span class="number">8</span>))</div><div class="line"><span class="comment"># in "inches", can change DPI "do ts per inch"</span></div><div class="line">x1 = np.linspace(<span class="number">0.0</span>, <span class="number">5.0</span>)</div><div class="line">x2 = np.linspace(<span class="number">0.0</span>, <span class="number">2.0</span>)</div><div class="line">y1 = np.cos(<span class="number">2</span> * np.pi * x1) * np.exp(-x1)</div><div class="line">y2 = np.cos(<span class="number">2</span> * np.pi * x2)</div><div class="line">plt.subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>)</div><div class="line">plt.plot(x1, y1, <span class="string">'yo-'</span>)</div><div class="line">plt.title(<span class="string">'A tale of 2 subplots'</span>)</div><div class="line">plt.ylabel(<span class="string">'Damped oscillation'</span>)</div><div class="line">f.savefig(<span class="string">"figure_inprogress.pdf"</span>)</div><div class="line">plt.subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>)</div><div class="line">plt.plot(x2, y2, <span class="string">'r.-'</span>)</div><div class="line">plt.xlabel(<span class="string">'time (s)'</span>)</div><div class="line">plt.ylabel(<span class="string">'Undamped'</span>)</div><div class="line"></div><div class="line">f.savefig(<span class="string">"figure.pdf"</span>)</div><div class="line">f.savefig(<span class="string">"figure.png"</span>)</div><div class="line">f.savefig(<span class="string">"figure_transparent.png"</span>,transparent=<span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<h2 id="18-two-figures"><a href="#18-two-figures" class="headerlink" title="18 two figures"></a>18 two figures</h2><ul>
<li>one with 2 subplots</li>
<li>one with just one plot but two lines</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#Create a figure with 2 subplots</span></div><div class="line">fig=plt.figure() <span class="comment">#create a top_level figure object</span></div><div class="line">ax=fig.add_subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="comment">#two rows,one column,first plot</span></div><div class="line">ax2=fig.add_subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>) <span class="comment">#two rows,one column,second plot</span></div><div class="line"></div><div class="line">t=np.arange(<span class="number">0.0</span>,<span class="number">1.0</span>,<span class="number">0.01</span>)</div><div class="line">s=np.sin(<span class="number">2</span>*np.pi*t)</div><div class="line">c=np.cos(<span class="number">2</span>*np.pi*t)</div><div class="line"></div><div class="line">ax.plot(t, s, color=<span class="string">'blue'</span>, lw=<span class="number">2</span>)</div><div class="line">ax2.plot(t, c, color=<span class="string">'red'</span>, lw=<span class="number">2</span>)</div><div class="line"><span class="comment"># Use Axes object to set labels on subplot</span></div><div class="line">ax.set_ylabel(<span class="string">"Top subplot"</span>)</div><div class="line">ax2.set_ylabel(<span class="string">"Bottom subplot"</span>)</div><div class="line"><span class="comment"># Create another Figure</span></div><div class="line">fig2 = plt.figure()</div><div class="line"><span class="comment"># Axes at an arbitrary location (normalized 0 to 1)</span></div><div class="line">ax3 = fig2.add_axes([<span class="number">0.15</span>, <span class="number">0.1</span>, <span class="number">0.7</span>, <span class="number">0.3</span>])</div><div class="line">ax3.set_title(<span class="string">"Axes at an arbitrary location"</span>)</div><div class="line">ax3.plot(t, s, color=<span class="string">'blue'</span>, lw=<span class="number">1</span>)</div><div class="line">ax3.plot(t, c, color=<span class="string">'red'</span>, lw=<span class="number">1</span>)</div><div class="line"><span class="comment"># ax4 = fig2.add_axes([0.2, 0.1, 0.7, 0.3])</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="19-two-different-scales-on-the-y-axis"><a href="#19-two-different-scales-on-the-y-axis" class="headerlink" title="19 two different scales on the y axis"></a>19 two different scales on the y axis</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#two scales - two y axes on the same plot</span></div><div class="line">fig,ax1=plt.subplots()</div><div class="line">t=np.arange(<span class="number">0.01</span>,<span class="number">10.0</span>,<span class="number">0.01</span>)</div><div class="line">s1=np.exp(t)</div><div class="line">ax1.plot(t,s1,<span class="string">'b-'</span>)</div><div class="line">ax1.set_xlabel(<span class="string">'time (s)'</span>)</div><div class="line"></div><div class="line"><span class="comment">#make the y-axis label and tick labels match the line color.</span></div><div class="line">ax1.set_ylabel(<span class="string">'exp'</span>,color=<span class="string">'b'</span>)</div><div class="line"><span class="keyword">for</span> tl <span class="keyword">in</span> ax1.get_yticklabels():</div><div class="line">			tl.set_color(<span class="string">'b'</span>)</div><div class="line"></div><div class="line"><span class="comment">#define a new twin axis</span></div><div class="line">ax2 = ax1.twinx()</div><div class="line">s2=np.sin(<span class="number">2</span>*np.pi*t)</div><div class="line">ax2.plot(t,s2,<span class="string">'r.'</span>)</div><div class="line">ax2.set_ylabel(<span class="string">'sin'</span>,color=<span class="string">'r'</span>)</div><div class="line"><span class="keyword">for</span> tl <span class="keyword">in</span> ax2.get_yticklabels():</div><div class="line">	tl.set_color(<span class="string">'r'</span>)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="20-matplotlib-artists"><a href="#20-matplotlib-artists" class="headerlink" title="20 matplotlib artists"></a>20 matplotlib artists</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#matplotlib artists</span></div><div class="line"><span class="comment">#this example displays several of matplotlib's graphics primitives</span></div><div class="line"><span class="comment">#(artists) drawn using matplotlib api.</span></div><div class="line"><span class="comment">#a full list of artists and the documentation is available at</span></div><div class="line"><span class="comment">#&lt;matplot.org/api/artist_api.html&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">import</span> matplotlib.path <span class="keyword">as</span> mpath</div><div class="line"><span class="keyword">import</span> matplotlib.lines <span class="keyword">as</span> mlines</div><div class="line"><span class="keyword">import</span> matplotlib.patches <span class="keyword">as</span> mpatches</div><div class="line"><span class="keyword">from</span> matplotlib.collections <span class="keyword">import</span> PatchCollection</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">label</span><span class="params">(xy, text)</span>:</span></div><div class="line">	y = xy[<span class="number">1</span>] - <span class="number">0.15</span></div><div class="line">	<span class="comment"># shift y-value for label so that it's below the artist</span></div><div class="line">	plt.text(xy[<span class="number">0</span>], y, text, ha=<span class="string">"center"</span>, family=<span class="string">'sans-		  serif'</span>,size=<span class="number">14</span>)</div><div class="line">fig, ax = plt.subplots()</div><div class="line"><span class="comment"># create 3x3 grid to plot the artists</span></div><div class="line">grid = np.mgrid[<span class="number">0.2</span>:<span class="number">0.8</span>:<span class="number">3j</span>, <span class="number">0.2</span>:<span class="number">0.8</span>:<span class="number">3j</span>].reshape(<span class="number">2</span>, <span class="number">-1</span>).T</div><div class="line">patches = []</div><div class="line"><span class="comment"># add a circle</span></div><div class="line">circle = mpatches.Circle(grid[<span class="number">0</span>], <span class="number">0.1</span>, ec=<span class="string">"none"</span>)</div><div class="line">patches.append(circle)</div><div class="line">label(grid[<span class="number">0</span>], <span class="string">"Circle"</span>)</div><div class="line"></div><div class="line"><span class="comment"># add a rectangle</span></div><div class="line">rect = mpatches.Rectangle(grid[<span class="number">1</span>] - [<span class="number">0.025</span>, <span class="number">0.05</span>], <span class="number">0.05</span>, <span class="number">0.1</span>, ec=<span class="string">"none"</span>)</div><div class="line">patches.append(rect)</div><div class="line">label(grid[<span class="number">1</span>], <span class="string">"Rectangle"</span>)</div><div class="line"><span class="comment"># add a wedge</span></div><div class="line">wedge = mpatches.Wedge(grid[<span class="number">2</span>], <span class="number">0.1</span>, <span class="number">30</span>, <span class="number">270</span>, ec=<span class="string">"none"</span>)</div><div class="line">patches.append(wedge)</div><div class="line">label(grid[<span class="number">2</span>], <span class="string">"Wedge"</span>)</div><div class="line"><span class="comment"># add a Polygon</span></div><div class="line">polygon = mpatches.RegularPolygon(grid[<span class="number">3</span>], <span class="number">5</span>, <span class="number">0.1</span>)</div><div class="line">patches.append(polygon)</div><div class="line">label(grid[<span class="number">3</span>], <span class="string">"Polygon"</span>)</div><div class="line"><span class="comment"># add an ellipse</span></div><div class="line">ellipse = mpatches.Ellipse(grid[<span class="number">4</span>], <span class="number">0.2</span>, <span class="number">0.1</span>)</div><div class="line">patches.append(ellipse)</div><div class="line">label(grid[<span class="number">4</span>], <span class="string">"Ellipse"</span>)</div><div class="line"><span class="comment"># add an arrow</span></div><div class="line">arrow = mpatches.Arrow(grid[<span class="number">5</span>, <span class="number">0</span>] - <span class="number">0.05</span>, grid[<span class="number">5</span>, <span class="number">1</span>] - <span class="number">0.05</span>, <span class="number">0.1</span>,</div><div class="line"><span class="number">0.1</span>, width=<span class="number">0.1</span>)</div><div class="line">patches.append(arrow)</div><div class="line">label(grid[<span class="number">5</span>], <span class="string">"Arrow"</span>)</div><div class="line"><span class="comment"># add a path patch</span></div><div class="line">Path = mpath.Path</div><div class="line">path_data = [</div><div class="line">(Path.MOVETO, [<span class="number">0.018</span>, <span class="number">-0.11</span>]),</div><div class="line">(Path.CURVE4, [<span class="number">-0.031</span>, <span class="number">-0.051</span>]),</div><div class="line">(Path.CURVE4, [<span class="number">-0.115</span>, <span class="number">0.073</span>]),</div><div class="line">(Path.CURVE4, [<span class="number">-0.03</span> , <span class="number">0.073</span>]),</div><div class="line">(Path.LINETO, [<span class="number">-0.011</span>, <span class="number">0.039</span>]),</div><div class="line">(Path.CURVE4, [<span class="number">0.043</span>, <span class="number">0.121</span>]),</div><div class="line">(Path.CURVE4, [<span class="number">0.075</span>, <span class="number">-0.005</span>]),</div><div class="line">(Path.CURVE4, [<span class="number">0.035</span>, <span class="number">-0.027</span>]),</div><div class="line">(Path.CLOSEPOLY, [<span class="number">0.018</span>, <span class="number">-0.11</span>])</div><div class="line">]</div><div class="line">codes , verts = zip(*path_data)</div><div class="line">path = mpath.Path(verts + grid[<span class="number">6</span>], codes)</div><div class="line">patch = mpatches.PathPatch(path)</div><div class="line">patches.append(patch)</div><div class="line">label(grid[<span class="number">6</span>], <span class="string">"PathPatch"</span>)</div><div class="line"><span class="comment"># add a fancy box</span></div><div class="line">fancybox = mpatches.FancyBboxPatch(</div><div class="line">grid[<span class="number">7</span>] - [<span class="number">0.025</span>, <span class="number">0.05</span>], <span class="number">0.05</span>, <span class="number">0.1</span>,</div><div class="line">boxstyle=mpatches.BoxStyle(<span class="string">"Round"</span>, pad=<span class="number">0.02</span>))</div><div class="line">patches.append(fancybox)</div><div class="line">label(grid[<span class="number">7</span>], <span class="string">"FancyBoxPatch"</span>)</div><div class="line"><span class="comment"># add a line</span></div><div class="line">x, y = np.array([[<span class="number">-0.06</span>, <span class="number">0.0</span>, <span class="number">0.1</span>], [<span class="number">0.05</span>, <span class="number">-0.05</span>, <span class="number">0.05</span>]])</div><div class="line">line = mlines.Line2D(x + grid[<span class="number">8</span>, <span class="number">0</span>], y + grid[<span class="number">8</span>, <span class="number">1</span>], lw=<span class="number">5.</span>, alpha=<span class="number">0.3</span>)</div><div class="line">label(grid[<span class="number">8</span>], <span class="string">"Line2D"</span>)</div><div class="line">colors = np.linspace(<span class="number">0</span>, <span class="number">1</span>, len(patches))</div><div class="line">collection = PatchCollection(patches, cmap=plt.cm.hsv, alpha=<span class="number">0.3</span>)</div><div class="line">collection.set_array(np.array(colors))</div><div class="line">ax.add_collection(collection)</div><div class="line">ax.add_line(line)</div><div class="line">plt.subplots_adjust(left=<span class="number">0</span>, right=<span class="number">1</span>, bottom=<span class="number">0</span>, top=<span class="number">1</span>)</div><div class="line">plt.axis(<span class="string">'equal'</span>)</div><div class="line">plt.axis(<span class="string">'off'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="21-date-time-format-in-matplotlib"><a href="#21-date-time-format-in-matplotlib" class="headerlink" title="21 date time format in matplotlib"></a>21 date time format in matplotlib</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#simple plotting of time series data</span></div><div class="line"><span class="keyword">import</span> matplotlib.cbook <span class="keyword">as</span> cbook</div><div class="line">datafile = cbook.get_sample_data(<span class="string">'goog.npy'</span>)</div><div class="line">r = np.load(datafile).view(np.recarray)</div><div class="line">r.date</div><div class="line">plt.plot(r.date,r.close)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">fig, ax=plt.subplots(<span class="number">1</span>)</div><div class="line">ax.plot(r.date, r.close)</div><div class="line">fig.autofmt_xdate()</div><div class="line"><span class="keyword">import</span> matplotlib.dates <span class="keyword">as</span> mdates</div><div class="line">ax.fmt_xdata=mdates.DateFormatter(<span class="string">'%Y-%m-%d'</span>)</div><div class="line">plt.title(<span class="string">'Fixing the labels'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#Data time format in matplotlib</span></div><div class="line"><span class="keyword">import</span> datetime</div><div class="line"><span class="keyword">import</span> matplotlib.dates <span class="keyword">as</span> mdates</div><div class="line"><span class="keyword">import</span> matplotlib.cbook <span class="keyword">as</span> cbook</div><div class="line">years = mdates.YearLocator() <span class="comment"># every year</span></div><div class="line">months = mdates.MonthLocator() <span class="comment"># every month</span></div><div class="line">yearsFmt = mdates.DateFormatter(<span class="string">'%Y'</span>)</div><div class="line"><span class="comment"># load a numpy record array from yahoo csv data with fields date,</span></div><div class="line"><span class="comment"># open, close, volume, adj_close from the mpl-data/example director y.</span></div><div class="line"><span class="comment"># The record array stores python datetime.date as an object array i n</span></div><div class="line"><span class="comment"># the date column</span></div><div class="line">datafile = cbook.get_sample_data(<span class="string">'goog.npy'</span>)</div><div class="line">r = np.load(datafile).view(np.recarray)</div><div class="line"><span class="comment"># Time based data</span></div><div class="line"><span class="comment"># r.date - array of datetimes</span></div><div class="line"><span class="comment"># r.adj_close - array of float prices</span></div><div class="line">fig, ax = plt.subplots()</div><div class="line">ax.plot(r.date, r.adj_close)</div><div class="line"><span class="comment"># format the ticks</span></div><div class="line"><span class="comment"># ax.xaxis.set_major_locator(years)</span></div><div class="line">ax.xaxis.set_major_formatter(yearsFmt)</div><div class="line"><span class="comment"># ax.xaxis.set_minor_locator(months)</span></div><div class="line"><span class="comment"># datemin = datetime.date(r.date.min().year, 1, 1)</span></div><div class="line"><span class="comment"># datemax = datetime.date(r.date.max().year + 1, 1, 1)</span></div><div class="line"><span class="comment"># ax.set_xlim(datemin, datemax)</span></div><div class="line"><span class="comment"># rotates and right aligns the x labels, and moves the bottom of the</span></div><div class="line"><span class="comment"># axes up to make room for them</span></div><div class="line">fig.autofmt_xdate()</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="22-statistical-plots"><a href="#22-statistical-plots" class="headerlink" title="22 statistical plots"></a>22 statistical plots</h2><p><em>adding error bars</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#Error bars can be specified as constants or as a function</span></div><div class="line"><span class="comment">#of the number of data points N:</span></div><div class="line"><span class="comment"># N x 1 Error varies for each point, but the error values are symmetric</span></div><div class="line"><span class="comment">#(i.e. the lower and upper values are equal).</span></div><div class="line"><span class="comment"># 2 x N Error varies for each point, and the lower and upper limits</span></div><div class="line"><span class="comment">#(in that order) are different (asymmetric case)</span></div><div class="line"><span class="comment"># example data</span></div><div class="line">x = np.arange(<span class="number">0.1</span>, <span class="number">4</span>, <span class="number">0.5</span>)</div><div class="line">y = np.exp(-x)</div><div class="line"><span class="comment"># example error bar values that vary with x-position</span></div><div class="line">error = <span class="number">0.1</span> + <span class="number">0.2</span> * x</div><div class="line"><span class="comment"># error bar values w/ different -/+ errors</span></div><div class="line">lower_error = <span class="number">0.4</span> * error</div><div class="line">upper_error = error</div><div class="line">asymmetric_error = [lower_error, upper_error]</div><div class="line">fig, (ax0, ax1, ax2) = plt.subplots(nrows=<span class="number">3</span>, sharex=<span class="keyword">True</span>)</div><div class="line">fig.set_size_inches(<span class="number">6</span>,<span class="number">6</span>)</div><div class="line">ax0.errorbar(x, y, xerr=<span class="number">0.2</span>, yerr=<span class="number">0.4</span>)</div><div class="line">ax0.set_title(<span class="string">'constant error'</span>)</div><div class="line">ax1.errorbar(x, y, yerr=error, fmt=<span class="string">'-o'</span>)</div><div class="line">ax1.set_title(<span class="string">'variable, symmetric error'</span>)</div><div class="line">ax2.errorbar(x, y, xerr=asymmetric_error, fmt=<span class="string">'o'</span>)</div><div class="line">ax2.set_title(<span class="string">'variable, asymmetric error'</span>)</div><div class="line">ax2.set_yscale(<span class="string">'log'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="23-boxplots"><a href="#23-boxplots" class="headerlink" title="23 boxplots"></a>23 boxplots</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#reference:</span></div><div class="line"><span class="comment">#&lt;matplotlib.org/examples/statistics/boxplot_color_demo.html&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"></div><div class="line"><span class="comment">#random test data</span></div><div class="line">np.random.seed(<span class="number">123</span>)</div><div class="line">all_data=[np.random.normal(<span class="number">0</span>,std,<span class="number">100</span>) <span class="keyword">for</span> std <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">4</span>)]</div><div class="line"></div><div class="line">fig, axes =plt.subplots(nrows=<span class="number">1</span>,ncols=<span class="number">2</span>,figsize=(<span class="number">12</span>,<span class="number">5</span>))</div><div class="line"></div><div class="line"><span class="comment"># rectangular box plot</span></div><div class="line">bplot1= axes[<span class="number">0</span>].boxplot(all_data,</div><div class="line">						notch=<span class="keyword">True</span>,  <span class="comment"># notch shape</span></div><div class="line">						vert=<span class="keyword">True</span>,   <span class="comment"># vertical box aligmnent</span></div><div class="line">						patch_artist=<span class="keyword">True</span>) <span class="comment">#fill with color</span></div><div class="line"><span class="comment"># notch shape box plot</span></div><div class="line">bplot2 = axes[<span class="number">1</span>].boxplot(all_data,</div><div class="line">                        vert=<span class="keyword">True</span>,<span class="comment">#vertical box aligmnent</span></div><div class="line">                        patch_artist=<span class="keyword">True</span>) <span class="comment">#fill with color</span></div><div class="line"><span class="comment">#fill with colors</span></div><div class="line">colors= [<span class="string">'pink'</span>,<span class="string">'lightblue'</span>,<span class="string">'lightgreen'</span>]</div><div class="line"><span class="keyword">for</span> bplot <span class="keyword">in</span> (bplot1,bplot2):</div><div class="line">	<span class="keyword">for</span> patch, color <span class="keyword">in</span> zip(bplot[<span class="string">'boxes'</span>],colors):</div><div class="line">		patch.set_facecolor(color)</div><div class="line"></div><div class="line"><span class="comment">#adding horizontal grid lines</span></div><div class="line"><span class="keyword">for</span> ax <span class="keyword">in</span> axes:</div><div class="line">    ax.yaxis.grid(<span class="keyword">True</span>)</div><div class="line">    ax.set_xticks([y+<span class="number">1</span> <span class="keyword">for</span> y <span class="keyword">in</span> range(len(all_data))],)</div><div class="line">    ax.set_xlabel(<span class="string">'xlabel'</span>)</div><div class="line">    ax.set_ylabel(<span class="string">'ylabel'</span>)</div><div class="line">    </div><div class="line"><span class="comment"># add x-tick labels</span></div><div class="line">plt.setp(axes,xticks=[y+<span class="number">1</span> <span class="keyword">for</span> y <span class="keyword">in</span> range(len(all_data))],</div><div class="line">        xticklabels=[<span class="string">'x1'</span>,<span class="string">'x2'</span>,<span class="string">'x3'</span>,<span class="string">'x4'</span>])</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="24-fan-chart"><a href="#24-fan-chart" class="headerlink" title="24 fan chart"></a>24 fan chart</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> datetime</div><div class="line"><span class="keyword">import</span> matplotlib.dates <span class="keyword">as</span> mdates</div><div class="line"><span class="keyword">import</span> matplotlib.cbook <span class="keyword">as</span> cbook</div><div class="line">years = mdates.YearLocator() <span class="comment"># every year</span></div><div class="line">months = mdates.MonthLocator() <span class="comment"># every month</span></div><div class="line">yearsFmt = mdates.DateFormatter(<span class="string">'%Y'</span>)</div><div class="line"><span class="comment">#load a numpy record array from yahoo csv data with fields date,</span></div><div class="line"><span class="comment"># open, close, volume, adj_close from the mpl-data/example directory.</span></div><div class="line"><span class="comment"># The record array stores python datetime.date as an object array</span></div><div class="line"><span class="comment">#in the date column</span></div><div class="line">datafile = cbook.get_sample_data(<span class="string">'goog.npy'</span>)</div><div class="line">r = np.load(datafile).view(np.recarray)</div><div class="line"><span class="comment"># Time based data</span></div><div class="line"><span class="comment"># r.date - array of datetimes</span></div><div class="line"><span class="comment"># r.adj_close - array of float prices</span></div><div class="line">fig, ax = plt.subplots()</div><div class="line">ax.plot(r.date, r.adj_close)</div><div class="line"><span class="comment"># format the ticks</span></div><div class="line">ax.xaxis.set_major_locator(years)</div><div class="line">ax.xaxis.set_major_formatter(yearsFmt)</div><div class="line">ax.xaxis.set_minor_locator(months)</div><div class="line">datemin = datetime.date(r.date.min().year, <span class="number">1</span>, <span class="number">1</span>)</div><div class="line">datemax = datetime.date(r.date.max().year + <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>)</div><div class="line">ax.set_xlim(datemin, datemax)</div><div class="line"><span class="comment"># Create a date range</span></div><div class="line">base = r.date.max()</div><div class="line">date_list = [base + datetime.timedelta(days=x) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">365</span>)]</div><div class="line"><span class="comment"># Fake a prediction</span></div><div class="line">predict_y = [<span class="number">-0.2</span>*x+r.adj_close[<span class="number">-1</span>] <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">365</span>)]</div><div class="line">ax.plot(date_list, predict_y, <span class="string">"r--"</span>)</div><div class="line"><span class="comment"># Fan-chart prediction</span></div><div class="line"><span class="keyword">for</span> step <span class="keyword">in</span> [<span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span>, <span class="number">0.8</span>]:</div><div class="line">	predict_y_pos = [-(<span class="number">0.20</span>+step)*x+r.adj_close[<span class="number">-1</span>] <span class="keyword">for</span> x <span class="keyword">in</span> 	range(<span class="number">1</span>,<span class="number">365</span>)]</div><div class="line">	predict_y_neg = [-(<span class="number">0.20</span>-step)*x+r.adj_close[<span class="number">-1</span>] <span class="keyword">for</span> x <span class="keyword">in</span> 	range(<span class="number">1</span>,<span class="number">365</span>)]</div><div class="line">	ax.fill_between(date_list,predict_y_pos, predict_y_neg,</div><div class="line">					alpha=<span class="number">0.1</span>, color=<span class="string">'red'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://fanyaoxin.com/2016/11/06/python-画图/" data-id="cizdwvupp00059ikgop03zkp2" class="article-share-link">Aktie</a><div class="tags"><a href="/tags/python/">python</a><a href="/tags/可视化/">可视化</a></div><div class="post-nav"><a href="/2016/11/07/python基础-1/" class="pre">python基础(1)</a><a href="/2016/11/02/武汉话/" class="next">武汉话</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://fanyaoxin.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/pattern-recognition/" style="font-size: 15px;">pattern recognition</a> <a href="/tags/database/" style="font-size: 15px;">database</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/数据分析/" style="font-size: 15px;">数据分析</a> <a href="/tags/可视化/" style="font-size: 15px;">可视化</a> <a href="/tags/强化学习/" style="font-size: 15px;">强化学习</a> <a href="/tags/生活/" style="font-size: 15px;">生活</a> <a href="/tags/AI/" style="font-size: 15px;">AI</a> <a href="/tags/机器学习/" style="font-size: 15px;">机器学习</a> <a href="/tags/文本处理/" style="font-size: 15px;">文本处理</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/19/向量机/">向量机</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/19/openAI-探索/">openAI 探索</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/10/神经网络/">神经网络</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/09/机器学习课程大纲/">机器学习课程大纲</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/25/机器学习笔记（一）/">机器学习笔记（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/05/noSQL/">noSQL</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/04/pandas/">pandas</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/22/python基础-pandas/">python基础-pandas</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/10/python基础-numpy/">python基础-numpy</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/09/python基础-3/">python基础(3)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Fan Yaoxin.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>